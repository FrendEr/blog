---
layout: post
title:  "ç§»åŠ¨è°ƒè¯•æ–¹æ³•æ€»ç»“"
description: "Chromeçš„æ¨¡æ‹Ÿå™¨ã€Weinreã€è·¯ç”±ä»£ç†ã€DebugGap"
keywords: "debuggap, debug, ç§»åŠ¨è°ƒè¯•, node-webkit, Weinre, ç§»åŠ¨è°ƒè¯•æ–¹æ³•æ€»ç»“"
date:   2015-06-30 22:57:00
categories: debug
---

æœ€è¿‘åœ¨å…¬å¸é¡¹ç›®ä¸€ç›´åšç€è§¦å±çš„é¡¹ç›®ï¼Œè¿™é‡Œä¸æ˜¯è¦è¯´é¡¹ç›®å¼€å‘çš„å®é™…å†…å®¹ï¼Œè€Œæ˜¯è°ƒè¯•ã€‚è¯´åˆ°è°ƒè¯•ï¼Œç›®å‰æœ‰å‡ ç§æ–¹æ¡ˆï¼š

##1. Chromeçš„æ¨¡æ‹Ÿå™¨

åœ¨PCä¸Šå¼€å‘è§¦å±é¡¹ç›®ï¼Œç›®å‰ç”¨å¾—æœ€å¤šè€Œä¸”æœ€æ–¹ä¾¿çš„è°ƒè¯•æ–¹å¼åº”è¯¥æ˜¯chromeçš„æ¨¡æ‹Ÿå™¨ï¼Œæ”¯æŒ20+ç§è®¾å¤‡æ¨¡æ‹Ÿï¼Œç„¶å¹¶åµï¼Œchromeçš„æ¨¡æ‹Ÿå™¨ä¸å®é™…çš„ç§»åŠ¨è®¾å¤‡ä½¿ç”¨æƒ…å†µè¿˜æ˜¯å­˜åœ¨è®¸å¤šä¸ä¸€è‡´çš„åœ°æ–¹ï¼Œå¯¼è‡´å¾ˆå¤šé—®é¢˜åœ¨å¼€å‘æ—¶æ²¡å‘ç°ï¼Œä¸€åˆ°äº†çº¿ä¸Šç”¨æ‰‹æœºæµ‹è¯•å°±å†’äº†å‡ºæ¥ğŸ˜¢ã€‚æ‰€ä»¥ï¼Œchromeæ¨¡æ‹Ÿå™¨å¹¶ä¸èƒ½ç”¨æ¥æµ‹è¯•è§£å†³å¤šæ•°çš„å…¼å®¹æ€§é—®é¢˜ã€‚

##2. Weinre

å…¶å®è¯´èµ·weinreï¼Œè¿˜çœŸä¸æƒ³å»æä»–ã€‚åæ§½ä¸‹ä»–çš„æ–‡æ¡£ï¼Œå†…å®¹è¯´å¾—è™½ç„¶æ˜¯å¤Ÿæ¸…æ™°ï¼Œä½†æ˜¯æ•´ä½“æ ·å¼æ’ç‰ˆçœ‹ç€çœŸå¿ƒåˆ«æ‰­ã€‚[weinreå®˜æ–¹æ–‡æ¡£](http://people.apache.org/~pmuellr/weinre/docs/latest/)ã€‚

##3. è·¯ç”±ä»£ç†

è¿™ä¸ªå¯ä»¥ç®—æ˜¯ç”¨å¾—æœ€èˆ’æœçš„ä¸€ç§æ–¹å¼äº†ï¼Œä½†æ˜¯å‰ææ˜¯æœ‰å±äºä½ è‡ªå·±æˆ–è€…å°ç»„ä¸€ä¸ªè·¯ç”±å™¨éšä½ ä»¬ç©å¼„ã€‚è¿™ç§æ–¹æ³•å°±æ˜¯æ‹¥æœ‰ä¸€ä¸ªè·¯ç”±å™¨ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªè·¯ç”±ä»£ç†å°†å…¶ipè¿›è¡Œæ˜ å°„åˆ°ä½ çš„æœºå™¨ä¸Šï¼Œä¾‹å¦‚ä½ PCå½“å‰çš„ipæ˜¯192.168.190.199ï¼Œå¸Œæœ›æ˜ å°„çš„åŸŸåæ˜¯hahaha.comï¼Œé‚£åœ¨è·¯ç”±ä»£ç†é‚£é‡Œè¿›è¡Œæ˜ å°„ï¼ˆå…¬å¸ç”¨çš„æ˜¯æè·¯ç”±ï¼‰ï¼Œç„¶åæ‰‹æœºè¿æ¥ä¸PCåŒä¸€ä¸ªè·¯ç”±å™¨ï¼Œå†è®¿é—®hahaha.comå°±å¯ä»¥è®¿é—®åˆ°æœ¬åœ°æœºå™¨çš„é¡µé¢äº†ã€‚å½“ç„¶ï¼Œè¿™ç§æ–¹å¼æ›´å¤šæ˜¯çœ‹é¡µé¢æ ·å¼ã€äº¤äº’ä¸€äº›è¡¨é¢çš„é—®é¢˜ï¼Œä½†ä¾‹å¦‚è„šæœ¬é”™è¯¯ã€å¼‚å¸¸æƒ…å†µç­‰æ˜¯æ²¡åŠæ³•ç”¨è¿™ç§æ–¹æ³•è¿›è¡Œæµ‹è¯•çš„ã€‚

##4. DebugGap

[DebugGap](http://www.debuggap.com/)è¢«èª‰ä¸ºæœ€å¼ºå¤§çš„webviewä¸æµè§ˆå™¨è°ƒè¯•å·¥å…·ï¼Œå»ºç«‹åœ¨[node-webkit](https://github.com/nwjs/nw.js)ä¸Šã€‚åœ¨DebugGapå®˜ç½‘ä¸‹è½½ç¬¦åˆä½ å½“å‰ç”µè„‘çš„ç‰ˆæœ¬ï¼Œè¿è¡Œä¸€ä¸ªappå¹¶å¡«å…¥ç›‘å¬çš„ipä»¥åŠç«¯å£ï¼Œç»™éœ€è¦æµ‹è¯•çš„ç•Œé¢å¼•å…¥ä¸€ä¸ªdebuggap.jsè„šæœ¬ï¼Œä¾¿å¯ä»¥å¼€å§‹ä½ çš„è°ƒè¯•ã€‚

####DebugGapä½¿ç”¨æ€»ç»“ï¼ŒæŒ‰ç…§æ­¥éª¤åˆ—ä¸¾å¦‚ä¸‹ï¼š

- (1) åˆ°[DebugGapå®˜ç½‘](http://www.debuggap.com/)ä¸‹è½½åº”ç”¨ç¨‹åºï¼Œä¸éœ€å®‰è£…ï¼Œè§£å‹å³å¯ä»¥ç”¨ï¼›

- (2) åœ¨éœ€è¦è°ƒè¯•çš„é¡µé¢æ·»åŠ debuggap.jsï¼Œ
{% highlight javascript %}
<script src="//frend.cc/debug/debuggap.js"></script>
{% endhighlight %}

- (3) æœ¬åœ°é…ç½®ï¼š

a) nginxé…ç½®
{% highlight javascript %}
http {
    #frend.cc server
    server {
        listen       80;

        server_name  frend.cc;

        gzip on;
        gzip_comp_level 2;

        add_header Access-Control-Allow-Origin *;
		
        location ~ \.(map|less|js|css|jpg|jpeg|png|gif|html|txt|tpl)$ {
            root    /Users/wangxin;
            index   index.html;
        }
    }
}
{% endhighlight %}

b) hosté…ç½®
{% highlight javascript %}
127.0.0.1   frend.cc
{% endhighlight %}

c) æµè§ˆå™¨è®¿é—®http://frend.cc
<br/>

##### è®¿é—®é¡µé¢ï¼Œæ³¨æ„å³ä¸Šè§’å‡ºç°çš„è“è‰²æŒ‰é’®
![image](https://frender.github.io/blog/images/post/debuggap/browser-step1.png)

##### ç‚¹å‡»è“è‰²æŒ‰é’®ï¼Œå‡ºç°èŠ±ç“£é€‰é¡¹ï¼Œé€‰æ‹©configè¿æ¥åˆ°debuggap app
![image](https://frender.github.io/blog/images/post/debuggap/browser-step2.png) 

##### è¾“å…¥ipã€ports
![image](https://frender.github.io/blog/images/post/debuggap/browser-step3.png)

d) debuggap appè¿æ¥ï¼Œå¹¶è°ƒè¯•
<br/>

##### è¿æ¥debuggapï¼Œç»™å„ä¸ªç«¯æä¾›ç›‘å¬å¯¹è±¡
![image](https://frender.github.io/blog/images/post/debuggap/debuggap-step1.png) 

##### è·å–å½“å‰åœ¨ç›‘å¬çš„è®¾å¤‡
![image](https://frender.github.io/blog/images/post/debuggap/debuggap-step2.png) 

##### é€‰æ‹©ç›‘å¬çš„è®¾å¤‡ï¼Œå±•ç¤ºæ§åˆ¶å°
![image](https://frender.github.io/blog/images/post/debuggap/debuggap-step3.png)

##### æ§åˆ¶å°å±•ç¤ºç½‘ç«™çš„é™æ€èµ„æº(`æ³¨æ„`å³ä¾§æ˜¾ç¤ºä¸æ”¯æŒå•æ­¥è°ƒè¯•æç¤ºï¼Œè¿™é‡Œå¦‚æœä½¿ç”¨android+chromeéœ€è¦ç”¨æ•°æ®çº¿è¿æ¥æ‰‹æœºä¸ç”µè„‘ï¼Œå¹¶æ‰‹æœºæ‰“å¼€USBè°ƒè¯•æ¨¡å¼ä»¥åŠå¼€å‘è€…é€‰é¡¹)
![image](https://frender.github.io/blog/images/post/debuggap/debuggap-step4.png) 

- (4) ä»¥ä¸Šçš„æ¨¡æ‹Ÿåœºæ™¯è®¾å¤‡æ”¯æŒä¸ºï¼šmac + chrome(æ¨¡æ‹Ÿå™¨)ã€‚å¦‚æœè¦ä½¿ç”¨å®é™…çš„æ‰‹æœºè®¾å¤‡æ¥æµ‹è¯•ï¼Œéœ€è¦ä¸€ä¸ªå±€åŸŸç½‘ï¼Œå³ä¸Šé¢ç¬¬ä¸‰ç‚¹[è·¯ç”±ä»£ç†](#è·¯ç”±ä»£ç†)è¯´çš„é‚£æ ·ï¼Œç„¶åè¿›è¡Œé¡µé¢çš„è®¿é—®ã€‚

- (5) ä½ ä»¥ä¸ºåšå®Œ(4)å°±OKäº†å—ï¼Ÿï¼NOï¼ï¼ï¼è¿˜æœ‰å‘ï¼â€”â€” 

`å‘ä¸€ï¼š` IOS8.1.xä»¥ä¸Šæ˜¯çœ‹ä¸åˆ°æ§åˆ¶å°å¯ä»¥è°ƒè¯•çš„å†…å®¹ï¼Œå³ä»¥ä¸‹çš„å›¾å±•ç¤ºçš„å†…å®¹ï¼Œçœ‹ä¸åˆ°ï¼ï¼ï¼
![image](https://frender.github.io/blog/images/post/debuggap/debuggap-step3.png) 

`å‘äºŒï¼š`æ‰‹æœºå¿…é¡»ç”¨USBè¿æ¥ä¸Šç”µè„‘æ‰å¯ä»¥å•æ­¥è°ƒè¯•ï¼Œä»ä¸çŸ¥é“åˆ°çŸ¥é“ï¼Œæˆ‘æŠ˜è…¾äº†å¥½ä¹…ï¼Œä¸è¦é—®æˆ‘æ˜¯æ€ä¹ˆå‘ç°çš„

`å‘ä¸‰ï¼š`ä½ ç”¨iphoneæ¥è°ƒè¯•ï¼Ÿè¿˜æƒ³ç”¨chromeæ¥è®¿é—®ï¼Ÿå‘µå‘µï¼Œè¿™é‡Œè²Œä¼¼ä¸è¡Œï¼Œè‡³äºä¸ºä»€ä¹ˆï¼Œæˆ‘ä¹Ÿä¸æ‡‚ã€‚ã€‚ã€‚

`å‘å››ï¼š`åæ§½å›½å†…çš„ä½¿ç”¨åˆ†äº«æ–‡ç« ï¼Œæ¸…ä¸€è‰²æŠ„å®˜ç½‘çš„ï¼Œç»†èŠ‚æ²¡è¯´æ¸…ï¼Œå¯¼è‡´æˆ‘ç»å†äº†ä»¥ä¸Šå¥½å¤šå‘

<br/>

## æ€»ç»“

æ€»çš„æ¥è¯´ï¼Œç›®å‰æœ€æ–¹ä¾¿è‚¯å®šæ˜¯ä½¿ç”¨chromeçš„æ¨¡æ‹Ÿå™¨æ¥è¿›è¡Œå¼€å‘çš„ï¼Œä½†æ˜¯éœ€è¦æµ‹è¯•ä¸€äº›æµè§ˆå™¨å…¼å®¹çš„æ—¶å€™ï¼Œå¹¶ä¸å»ºè®®ï¼Œè€Œæ˜¯éœ€è¦çœŸæœºæµ‹è¯•ã€‚The endã€‚


