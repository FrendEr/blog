---
layout: post
title:  "移动调试方法总结"
description: "Chrome的模拟器、Weinre、路由代理、DebugGap"
keywords: "debuggap, debug, 移动调试, node-webkit, Weinre, 移动调试方法总结"
date:   2015-06-30 22:57:00
categories: debug
---

最近在公司项目一直做着触屏的项目，这里不是要说项目开发的实际内容，而是调试。说到调试，目前有几种方案：

##1. Chrome的模拟器

在PC上开发触屏项目，目前用得最多而且最方便的调试方式应该是chrome的模拟器，支持20+种设备模拟，然并卵，chrome的模拟器与实际的移动设备使用情况还是存在许多不一致的地方，导致很多问题在开发时没发现，一到了线上用手机测试就冒了出来😢。所以，chrome模拟器并不能用来测试解决多数的兼容性问题。

##2. Weinre

其实说起weinre，还真不想去提他。吐槽下他的文档，内容说得虽然是够清晰，但是整体样式排版看着真心别扭。[weinre官方文档](http://people.apache.org/~pmuellr/weinre/docs/latest/)。

##3. 路由代理

这个可以算是用得最舒服的一种方式了，但是前提是有属于你自己或者小组一个路由器随你们玩弄。这种方法就是拥有一个路由器，然后使用一个路由代理将其ip进行映射到你的机器上，例如你PC当前的ip是192.168.190.199，希望映射的域名是hahaha.com，那在路由代理那里进行映射（公司用的是极路由），然后手机连接与PC同一个路由器，再访问hahaha.com就可以访问到本地机器的页面了。当然，这种方式更多是看页面样式、交互一些表面的问题，但例如脚本错误、异常情况等是没办法用这种方法进行测试的。

##4. DebugGap

[DebugGap](http://www.debuggap.com/)被誉为最强大的webview与浏览器调试工具，建立在[node-webkit](https://github.com/nwjs/nw.js)上。在DebugGap官网下载符合你当前电脑的版本，运行一个app并填入监听的ip以及端口，给需要测试的界面引入一个debuggap.js脚本，便可以开始你的调试。

####DebugGap使用总结，按照步骤列举如下：

- (1) 到[DebugGap官网](http://www.debuggap.com/)下载应用程序，不需安装，解压即可以用；

- (2) 在需要调试的页面添加debuggap.js，
{% highlight javascript %}
<script src="//frend.cc/debug/debuggap.js"></script>
{% endhighlight %}

- (3) 本地配置：

a) nginx配置
{% highlight javascript %}
http {
    #frend.cc server
    server {
        listen       80;

        server_name  frend.cc;

        gzip on;
        gzip_comp_level 2;

        add_header Access-Control-Allow-Origin *;
		
        location ~ \.(map|less|js|css|jpg|jpeg|png|gif|html|txt|tpl)$ {
            root    /Users/wangxin;
            index   index.html;
        }
    }
}
{% endhighlight %}

b) host配置
{% highlight javascript %}
127.0.0.1   frend.cc
{% endhighlight %}

c) 浏览器访问http://frend.cc
<br/>

##### 访问页面，注意右上角出现的蓝色按钮
![image](https://frender.github.io/blog/images/post/debuggap/browser-step1.png)

##### 点击蓝色按钮，出现花瓣选项，选择config连接到debuggap app
![image](https://frender.github.io/blog/images/post/debuggap/browser-step2.png) 

##### 输入ip、ports
![image](https://frender.github.io/blog/images/post/debuggap/browser-step3.png)

d) debuggap app连接，并调试
<br/>

##### 连接debuggap，给各个端提供监听对象
![image](https://frender.github.io/blog/images/post/debuggap/debuggap-step1.png) 

##### 获取当前在监听的设备
![image](https://frender.github.io/blog/images/post/debuggap/debuggap-step2.png) 

##### 选择监听的设备，展示控制台
![image](https://frender.github.io/blog/images/post/debuggap/debuggap-step3.png)

##### 控制台展示网站的静态资源(`注意`右侧显示不支持单步调试提示，这里如果使用android+chrome需要用数据线连接手机与电脑，并手机打开USB调试模式以及开发者选项)
![image](https://frender.github.io/blog/images/post/debuggap/debuggap-step4.png) 

- (4) 以上的模拟场景设备支持为：mac + chrome(模拟器)。如果要使用实际的手机设备来测试，需要一个局域网，即上面第三点[路由代理](#路由代理)说的那样，然后进行页面的访问。

- (5) 你以为做完(4)就OK了吗？！NO！！！还有坑！—— 

`坑一：` IOS8.1.x以上是看不到控制台可以调试的内容，即以下的图展示的内容，看不到！！！
![image](https://frender.github.io/blog/images/post/debuggap/debuggap-step3.png) 

`坑二：`手机必须用USB连接上电脑才可以单步调试，从不知道到知道，我折腾了好久，不要问我是怎么发现的

`坑三：`你用iphone来调试？还想用chrome来访问？呵呵，这里貌似不行，至于为什么，我也不懂。。。

`坑四：`吐槽国内的使用分享文章，清一色抄官网的，细节没说清，导致我经历了以上好多坑

<br/>

## 总结

总的来说，目前最方便肯定是使用chrome的模拟器来进行开发的，但是需要测试一些浏览器兼容的时候，并不建议，而是需要真机测试。The end。


